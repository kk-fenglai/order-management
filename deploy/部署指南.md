# 🚀 集运管理系统部署指南

## 📋 部署方案总览

为了让其他人可以直接通过网页链接访问您的集运管理系统，我们提供了多种部署方案：

### 🎯 推荐方案（按推荐程度排序）

1. **ngrok 本地部署** ⭐⭐⭐⭐⭐ - 最简单，立即可用
2. **Railway 云部署** ⭐⭐⭐⭐ - 免费，稳定
3. **Render 云部署** ⭐⭐⭐⭐ - 免费，简单
4. **Heroku 云部署** ⭐⭐⭐ - 需要信用卡验证

---

## 🌐 方案1：ngrok 本地部署（推荐）

### 优点
- ✅ 无需注册账号
- ✅ 立即可用
- ✅ 完全免费
- ✅ 数据保存在本地

### 缺点
- ❌ 需要您的电脑保持运行
- ❌ 链接会在重启后变化

### 使用步骤

#### 方法1：使用自动脚本（推荐）
```bash
# Windows 用户
双击运行 start_public.bat

# 或者手动运行
python deploy_ngrok.py
```

#### 方法2：手动操作
```bash
# 1. 安装 ngrok
pip install pyngrok

# 2. 启动应用
python run_app.py

# 3. 在另一个终端启动 ngrok
ngrok http 5000
```

### 获取公网链接
运行后，您会看到类似这样的输出：
```
🌐 公网访问链接已创建！
📱 其他人可以通过以下链接访问：
🔗 https://abc123.ngrok.io
```

**将这个链接分享给其他人即可！**

---

## ☁️ 方案2：Railway 云部署

### 优点
- ✅ 完全免费
- ✅ 24/7 在线
- ✅ 固定域名
- ✅ 自动部署

### 使用步骤

1. **注册 Railway 账号**
   - 访问 https://railway.app
   - 使用 GitHub 账号登录

2. **部署项目**
   ```bash
   # 安装 Railway CLI
   npm install -g @railway/cli
   
   # 登录 Railway
   railway login
   
   # 部署项目
   railway up
   ```

3. **配置环境变量**
   - 在 Railway 控制台设置邮件配置
   - 设置 `MAIL_USERNAME`、`MAIL_PASSWORD` 等

4. **获取域名**
   - Railway 会自动分配一个域名
   - 格式：`https://your-app-name.railway.app`

---

## ☁️ 方案3：Render 云部署

### 优点
- ✅ 完全免费
- ✅ 简单易用
- ✅ 自动 HTTPS

### 使用步骤

1. **注册 Render 账号**
   - 访问 https://render.com
   - 使用 GitHub 账号登录

2. **连接 GitHub 仓库**
   - 将代码推送到 GitHub
   - 在 Render 中连接仓库

3. **创建 Web Service**
   - 选择 Python 环境
   - 设置构建命令：`pip install -r requirements.txt`
   - 设置启动命令：`python run_app.py`

4. **配置环境变量**
   - 设置邮件配置
   - 设置 `SECRET_KEY`

---

## 🔧 环境变量配置

无论使用哪种部署方案，都需要配置以下环境变量：

### 邮件配置
```bash
MAIL_SERVER=smtp.163.com
MAIL_PORT=465
MAIL_USE_SSL=True
MAIL_USERNAME=your-email@163.com
MAIL_PASSWORD=your-password
```

### 应用配置
```bash
SECRET_KEY=your-secret-key
FLASK_ENV=production
```

---

## 📱 移动端访问优化

### 二维码分享
1. 获取公网链接后，生成二维码
2. 其他人扫描二维码即可访问

### 微信分享
- 将链接发送到微信群
- 点击链接即可在微信内置浏览器中打开

---

## 🔒 安全注意事项

### 生产环境安全
1. **修改默认密码**
2. **使用强密码**
3. **定期备份数据**
4. **监控访问日志**

### 数据保护
1. **定期备份数据库**
2. **加密敏感信息**
3. **限制访问权限**

---

## 🆘 常见问题

### Q: ngrok 链接无法访问？
A: 检查防火墙设置，确保端口 5000 未被占用

### Q: 邮件发送失败？
A: 检查邮件配置，确保授权码正确

### Q: 数据库连接错误？
A: 确保数据库文件权限正确

### Q: 页面加载缓慢？
A: 检查网络连接，考虑使用云部署方案

---

## 📞 技术支持

如果遇到问题，请检查：
1. 控制台错误信息
2. 网络连接状态
3. 配置文件设置
4. 依赖包安装情况

---

## 🎉 部署成功！

部署完成后，您就可以：
- 📱 分享链接给团队成员
- 🔗 在任何设备上访问系统
- 📧 正常发送邮件通知
- 📊 实时查看包裹状态

**祝您使用愉快！** 🚀 